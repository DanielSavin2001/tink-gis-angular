'use strict';
class ArcGIStheme extends Theme {
    constructor(rawdata, themeData) {
        super();
        let rawlayers = rawdata.layers;
        this.Naam = rawdata.documentInfo.Title;
        this.name = rawdata.documentInfo.Title;
        this.Description = rawdata.documentInfo.Subject;
        this.Layers = [];
        this.AllLayers = [];
        this.Groups = [];
        this.CleanUrl = themeData.cleanUrl;
        this.Url = themeData.url;
        this.VisibleLayers = [];
        this.VisibleLayerIds = [];
        this.Visible = true;
        this.Added = false;
        this.enabled = true;
        this.Type = ThemeType.ESRI;
        this.status = ThemeStatus.NEW;
        this.MapData = {};
        rawlayers.forEach((layerInfo) => {
            let layer = new Layer(layerInfo, this);
            this.AllLayers.push(layer);
            if (layer.parentLayerId === -1) {
                if (layer.subLayerIds === null) {
                    this.Layers.push(layer);
                }
                else {
                    this.Groups.push(layer);
                }
            }
        });
        this.Groups.forEach((layerGroup) => {
            if (layerGroup.subLayerIds !== null) {
                layerGroup.Layers = [];
                this.AllLayers.forEach((layer) => {
                    if (layerGroup.id === layer.parentLayerId) {
                        layer.parent = layerGroup;
                        layerGroup.Layers.push(layer);
                    }
                });
            }
        });
        this.RecalculateVisibleLayerIds();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJjR0lTdGhlbWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhcmNHSVN0aGVtZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxZQUFZLENBQUM7QUFDYiwwQkFBMEIsS0FBSztJQUMzQixZQUFZLE9BQVksRUFBRSxTQUFjO1FBQ3BDLE9BQU8sQ0FBQztRQUNSLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDL0IsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztRQUN2QyxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUM7UUFDaEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDO1FBQ25DLElBQUksQ0FBQyxHQUFHLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQztRQUN6QixJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDO1FBQzlCLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTO1lBQ3hCLElBQUksS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN2QyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMzQixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsYUFBYSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDN0IsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDNUIsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDNUIsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVTtZQUMzQixFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ2xDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO2dCQUN2QixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUs7b0JBQ3pCLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxFQUFFLEtBQUssS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7d0JBQ3hDLEtBQUssQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDO3dCQUMxQixVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDbEMsQ0FBQztnQkFDTCxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO0lBQ3RDLENBQUM7QUFDTCxDQUFDO0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQge1RoZW1lfSBmcm9tICcuL3RoZW1lJztcclxuLy8gaW1wb3J0IHtMYXllcn0gZnJvbSAnLi9sYXllcic7XHJcbid1c2Ugc3RyaWN0JztcclxuY2xhc3MgQXJjR0lTdGhlbWUgZXh0ZW5kcyBUaGVtZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyYXdkYXRhOiBhbnksIHRoZW1lRGF0YTogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBsZXQgcmF3bGF5ZXJzID0gcmF3ZGF0YS5sYXllcnM7IFxyXG4gICAgICAgIHRoaXMuTmFhbSA9IHJhd2RhdGEuZG9jdW1lbnRJbmZvLlRpdGxlO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IHJhd2RhdGEuZG9jdW1lbnRJbmZvLlRpdGxlO1xyXG4gICAgICAgIHRoaXMuRGVzY3JpcHRpb24gPSByYXdkYXRhLmRvY3VtZW50SW5mby5TdWJqZWN0O1xyXG4gICAgICAgIHRoaXMuTGF5ZXJzID0gW107IC8vIGRlIGxheWVycyBkaXJlY3Qgb25kZXIgaGV0IHRoZW1lIHpvbmRlciBzdWJsYXllcnNcclxuICAgICAgICB0aGlzLkFsbExheWVycyA9IFtdOyAvLyBhbGxlIExheWVycyBkaWUgaGlqIGhlZWZ0IGluY2x1ZGluZyBzdWJncm91cGxheWVyc1xyXG4gICAgICAgIHRoaXMuR3JvdXBzID0gW107IC8vIGxheWVyZ3JvdXBzIGRpZSBub2cgZWVucyBsYXllcnMgemVsZiBoZWJiZW5cclxuICAgICAgICB0aGlzLkNsZWFuVXJsID0gdGhlbWVEYXRhLmNsZWFuVXJsO1xyXG4gICAgICAgIHRoaXMuVXJsID0gdGhlbWVEYXRhLnVybDtcclxuICAgICAgICB0aGlzLlZpc2libGVMYXllcnMgPSBbXTtcclxuICAgICAgICB0aGlzLlZpc2libGVMYXllcklkcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5BZGRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5UeXBlID0gVGhlbWVUeXBlLkVTUkk7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBUaGVtZVN0YXR1cy5ORVc7XHJcbiAgICAgICAgdGhpcy5NYXBEYXRhID0ge307XHJcbiAgICAgICAgcmF3bGF5ZXJzLmZvckVhY2goKGxheWVySW5mbykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbGF5ZXIgPSBuZXcgTGF5ZXIobGF5ZXJJbmZvLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5BbGxMYXllcnMucHVzaChsYXllcik7XHJcbiAgICAgICAgICAgIGlmIChsYXllci5wYXJlbnRMYXllcklkID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyLnN1YkxheWVySWRzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5MYXllcnMucHVzaChsYXllcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuR3JvdXBzLnB1c2gobGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5Hcm91cHMuZm9yRWFjaCgobGF5ZXJHcm91cCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobGF5ZXJHcm91cC5zdWJMYXllcklkcyAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJHcm91cC5MYXllcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuQWxsTGF5ZXJzLmZvckVhY2goKGxheWVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyR3JvdXAuaWQgPT09IGxheWVyLnBhcmVudExheWVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIucGFyZW50ID0gbGF5ZXJHcm91cDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJHcm91cC5MYXllcnMucHVzaChsYXllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLlJlY2FsY3VsYXRlVmlzaWJsZUxheWVySWRzKCk7XHJcbiAgICB9XHJcbn0iXX0=