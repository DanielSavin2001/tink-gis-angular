'use strict';
var app;
(function (app) {
    class wmstheme extends app.Theme {
        constructor(data, url) {
            super();
            var returnjson = JXON.stringToJs(data).wms_capabilities;
            this.Version = returnjson['version'];
            this.name = returnjson.service.title;
            this.Naam = returnjson.service.title;
            this.enabled = true;
            this.Visible = true;
            this.CleanUrl = url;
            this.Added = false;
            this.status = ThemeStatus.NEW;
            this.Description = returnjson.service.abstract;
            this.Type = ThemeType.WMS;
            var layers = returnjson.capability.layer.layer;
            var lays = [];
            if (layers) {
                if (layers.length == undefined) {
                    lays.push(layers);
                }
                else {
                    lays = layers;
                }
            }
            else {
                lays.push(returnjson.capability.layer);
            }
            layers.forEach(layer => {
                let lay = new app.wmslayer(layer, this);
                this.Layers.push(lay);
                this.AllLayers.push(lay);
            });
            this.RecalculateVisibleLayerIds();
        }
        UpdateMap(map) {
            this.RecalculateVisibleLayerIds();
            map.removeLayer(this.MapData);
            map.addLayer(this.MapData);
        }
    }
    app.wmstheme = wmstheme;
})(app || (app = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid21zdGhlbWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3bXN0aGVtZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFDYixJQUFVLEdBQUcsQ0E4Q1o7QUE5Q0QsV0FBVSxHQUFHLEVBQUMsQ0FBQztJQUNYLHVCQUE4QixTQUFLO1FBSS9CLFlBQVksSUFBSSxFQUFFLEdBQUc7WUFDakIsT0FBTyxDQUFDO1lBQ1IsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztZQUN4RCxJQUFJLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNyQyxJQUFJLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7WUFFckMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7WUFDcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7WUFDcEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7WUFDcEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDbkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDO1lBQzlCLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7WUFDL0MsSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDO1lBQzFCLElBQUksTUFBTSxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztZQUMvQyxJQUFJLElBQUksR0FBRyxFQUFFLENBQUM7WUFDZCxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNULEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQTtnQkFDckIsQ0FBQztnQkFDRCxJQUFJLENBQUMsQ0FBQztvQkFDRixJQUFJLEdBQUcsTUFBTSxDQUFDO2dCQUNsQixDQUFDO1lBQ0wsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUMxQyxDQUFDO1lBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLO2dCQUNoQixJQUFJLEdBQUcsR0FBRyxJQUFJLFlBQVEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQ3BDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN0QixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM3QixDQUFDLENBQUMsQ0FBQztZQUNILElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1FBRXRDLENBQUM7UUFDRCxTQUFTLENBQUMsR0FBVTtZQUNoQixJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztZQUNsQyxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM5QixHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQixDQUFDO0lBQ0wsQ0FBQztJQTNDWSxZQUFRLFdBMkNwQixDQUFBO0FBRUwsQ0FBQyxFQTlDUyxHQUFHLEtBQUgsR0FBRyxRQThDWiIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxubmFtZXNwYWNlIGFwcCB7XHJcbiAgICBleHBvcnQgY2xhc3Mgd21zdGhlbWUgZXh0ZW5kcyBUaGVtZSB7XHJcbiAgICAgICAgVmVyc2lvbjogc3RyaW5nO1xyXG4gICAgICAgIFZpc2libGVMYXllcklkczogQXJyYXk8c3RyaW5nPjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZGF0YSwgdXJsKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5qc29uID0gSlhPTi5zdHJpbmdUb0pzKGRhdGEpLndtc19jYXBhYmlsaXRpZXM7XHJcbiAgICAgICAgICAgIHRoaXMuVmVyc2lvbiA9IHJldHVybmpzb25bJ3ZlcnNpb24nXTtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gcmV0dXJuanNvbi5zZXJ2aWNlLnRpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLk5hYW0gPSByZXR1cm5qc29uLnNlcnZpY2UudGl0bGU7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuVGl0bGUgPSByZXR1cm5qc29uLnNlcnZpY2UudGl0bGU7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuQ2xlYW5VcmwgPSB1cmw7XHJcbiAgICAgICAgICAgIHRoaXMuQWRkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBUaGVtZVN0YXR1cy5ORVc7XHJcbiAgICAgICAgICAgIHRoaXMuRGVzY3JpcHRpb24gPSByZXR1cm5qc29uLnNlcnZpY2UuYWJzdHJhY3Q7XHJcbiAgICAgICAgICAgIHRoaXMuVHlwZSA9IFRoZW1lVHlwZS5XTVM7XHJcbiAgICAgICAgICAgIHZhciBsYXllcnMgPSByZXR1cm5qc29uLmNhcGFiaWxpdHkubGF5ZXIubGF5ZXI7XHJcbiAgICAgICAgICAgIHZhciBsYXlzID0gW107XHJcbiAgICAgICAgICAgIGlmIChsYXllcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsYXllcnMubGVuZ3RoID09IHVuZGVmaW5lZCkgeyAvLyBhcnJheSwgaXQgaGFzIGEgbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5cy5wdXNoKGxheWVycylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheXMgPSBsYXllcnM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXlzLnB1c2gocmV0dXJuanNvbi5jYXBhYmlsaXR5LmxheWVyKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxheWVycy5mb3JFYWNoKGxheWVyID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsYXkgPSBuZXcgd21zbGF5ZXIobGF5ZXIsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5MYXllcnMucHVzaChsYXkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5BbGxMYXllcnMucHVzaChsYXkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5SZWNhbGN1bGF0ZVZpc2libGVMYXllcklkcygpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgVXBkYXRlTWFwKG1hcDogTC5NYXApIHtcclxuICAgICAgICAgICAgdGhpcy5SZWNhbGN1bGF0ZVZpc2libGVMYXllcklkcygpO1xyXG4gICAgICAgICAgICBtYXAucmVtb3ZlTGF5ZXIodGhpcy5NYXBEYXRhKTtcclxuICAgICAgICAgICAgbWFwLmFkZExheWVyKHRoaXMuTWFwRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcblxyXG4iXX0=