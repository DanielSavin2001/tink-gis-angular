<div ng-class="{'hidden-print': lyrctrl.layer.IsEnabledAndVisible == false}" >
    <div class="" ng-if="lyrctrl.layer.hasLayers">
        <li class="li-item toc-item-without-icon can-open" ng-class="{'open': showLayer}">
            <div>
                <input class="visible-box hidden-print" type="checkbox" id="{{lyrctrl.layer.name}}{{lyrctrl.layer.id}}" ng-model="lyrctrl.layer.visible" ng-change="layercheckboxchange(lyrctrl.layer.theme)">
                <label for="{{lyrctrl.layer.name}}{{lyrctrl.layer.id}}">{{lyrctrl.layer.name}}</label>
            </div>
            <div>
                <span ng-click="showLayer = !showLayer"></span>
            </div>
        </li>

        <ul class="" ng-show="showLayer" ng-repeat="layer in lyrctrl.layer.Layers | filter :  { enabled: true }">
            <tink-Layer layer="layer" layercheckboxchange="layercheckboxchange(layer.theme)">
            </tink-Layer>
        </ul>

    </div>

        <li class="li-item toc-item-with-icon" ng-if="!lyrctrl.layer.hasLayers">
            <img class="layer-icon" ng-if="lyrctrl.layer.theme.Type=='esri' && lyrctrl.layer.legend.length==1"  ng-src="{{lyrctrl.layer.legend[0].fullurl}} "></img>
            <div>
                <input  class="visible-box hidden-print" type="checkbox" ng-model="lyrctrl.layer.visible" ng-change="layercheckboxchange(lyrctrl.layer.theme)" id="{{lyrctrl.layer.name}}{{lyrctrl.layer.id}} ">
                <label ng-class="{ 'greytext': lyrctrl.layer.displayed==false} " for="{{lyrctrl.layer.name}}{{lyrctrl.layer.id}}"> {{lyrctrl.layer.title}}
                    <span class="hidden-print" ng-show="lyrctrl.layer.theme.Type=='wms' && lyrctrl.layer.queryable ">(i)</span>
                </label>
            </div>
        </li>
        <ul ng-if="lyrctrl.layer.theme.Type=='wms'">
            <li class="li-item toc-item-without-icon can-open" ng-class="{'open': showLayer}">WMS
                <span ng-click="showLayer = !showLayer"></span>
            </li>
            <li>
                <img class="normal-size" ng-src="{{lyrctrl.layer.legendUrl}}" ng-show="showLayer"><img>
            </li>
        </ul>
        <ul ng-if="lyrctrl.layer.theme.Type=='esri' && lyrctrl.layer.legend.length> 1" ng-repeat="legend in lyrctrl.legends">
            <li class="li-item toc-item-with-icon">
                <img style="width:20px; height:20px;" ng-src="{{legend.url}}"><img><span>Â²{{legend.label}}</span>
            </li>
        </ul>

</div>
