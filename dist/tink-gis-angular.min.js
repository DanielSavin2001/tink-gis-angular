/*! tink-gis-angular v1.0.0 */
"use strict";!function(module){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var theController=module.controller("layerController",function($scope,$http,GisDataService){console.log("layerController CTOR")});theController.$inject=["GisDataService"]}(),function(module){module=angular.module("tink.gis.angular");var theController=module.controller("layersController",function($scope,GisDataService){console.log("layersController CTOR")});theController.$inject=["GisDataService"]}(),function(module){module=angular.module("tink.gis.angular");var theController=module.controller("mapController",function($scope,HelperService,GisDataService,BaseLayersService,map,MapService,$http){$scope.layerId="",$scope.activeInteractieKnop="identify",$scope.selectedlayer=[],map=L.map("map",{center:[51.2192159,4.4028818],zoom:16,layers:[BaseLayersService.kaart],zoomControl:!1}),map.doubleClickZoom.disable(),$http.get("http://app10.a.gis.local/arcgissql/rest/services/A_GeoService/operationallayers/MapServer/?f=pjson").success(function(data){$scope.Layers=data.layers}),L.control.scale({imperial:!1}).addTo(map);var AGeaoService=L.esri.dynamicMapLayer({url:"http://app10.a.gis.local/arcgissql/rest/services/A_GeoService/operationallayers/MapServer",opacity:.5,layers:[],useCors:!1}).addTo(map);map.on("click",function(e){console.log("click op de map"),cleanMapAndSearch(),AGeaoService.identify().on(map).at(e.latlng).layers("visible:"+$scope.layerId).run(function(error,featureCollection){for(var x=0;x<featureCollection.features.length;x++){MapService.jsonFeatures.push(featureCollection.features[x]),console.log(featureCollection.features[x]);var item=L.geoJson(featureCollection.features[x]).addTo(map);MapService.visibleFeatures.push(item)}$scope.$apply()})});var cleanMapAndSearch=function(){for(var x=0;x<MapService.visibleFeatures.length;x++)map.removeLayer(MapService.visibleFeatures[x]);MapService.visibleFeatures.length=0,MapService.jsonFeatures.length=0};$scope.identify=function(){cleanMapAndSearch(),$scope.activeInteractieKnop="identify",$scope.layerId="",AGeaoService.options.layers=[$scope.layerId]},$scope.select=function(){cleanMapAndSearch(),$scope.activeInteractieKnop="select",$scope.layerId="0",$scope.selectedlayer.id="0",AGeaoService.options.layers=[$scope.layerId]},$scope.layerChange=function(){$scope.layerId=$scope.selectedlayer.id,AGeaoService.options.layers=[$scope.layerId]},$scope.zoomIn=function(){map.zoomIn()},$scope.zoomOut=function(){map.zoomOut()},$scope.fullExtent=function(){map.setView(new L.LatLng(51.2192159,4.4028818),16)},$scope.kaartIsGetoond=!0,$scope.toonKaart=function(){$scope.kaartIsGetoond=!0,map.removeLayer(BaseLayersService.luchtfoto),map.addLayer(BaseLayersService.kaart)},$scope.toonLuchtfoto=function(){$scope.kaartIsGetoond=!1,map.removeLayer(BaseLayersService.kaart),map.addLayer(BaseLayersService.luchtfoto)}});theController.$inject=["HelperService","GisDataService","BaseLayersService","map","MapService","$http"]}(),function(module){module=angular.module("tink.gis.angular");var theController=module.controller("searchController",function($scope,MapService){$scope.features=MapService.jsonFeatures});theController.$inject=["MapService"]}(),function(module){module=angular.module("tink.gis.angular"),module.directive("layer",function(){return{restrict:"E",scope:{layerData:"="},templateUrl:"templates/layer.html",controller:"layerController"}})}(),function(module){module=angular.module("tink.gis.angular"),module.directive("tinkLayers",function(){return{replace:!0,templateUrl:"templates/layersTemplate.html",controller:"layersController"}})}(),function(module){module=angular.module("tink.gis.angular"),module.directive("tinkMap",function(){return{replace:!0,templateUrl:"templates/mapTemplate.html",scope:{parlayers:"=",parcenter:"="},controller:"mapController"}})}(),function(module){module=angular.module("tink.gis.angular"),module.directive("tinkSearch",function(){return{replace:!0,templateUrl:"templates/searchTemplate.html",controller:"searchController"}})}();try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}module.constant("appConfig",{templateUrl:"/digipolis.stadinkaart.webui",apiUrl:"/digipolis.stadinkaart.api/",enableDebug:!0,enableLog:!0}),module.directive("preventDefault",function(){return function(scope,element,attrs){angular.element(element).bind("click",function(event){event.preventDefault(),event.stopPropagation()}),angular.element(element).bind("dblclick",function(event){event.preventDefault(),event.stopPropagation()})}});var helperService=function(){var map={};return map};module.factory("map",helperService),console.log("init done"),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var gisDataService=function(HelperService,$http){var _layerData={};return $http.get("http://app10.a.gis.local/arcgissql/rest/services/A_GeoService/operationallayers/MapServer/?f=pjson").success(function(data){console.log("GOT THE DATA!"),_layerData=data}),{layerData:_layerData,layers:_layerData.layers}};gisDataService.$inject=["HelperService","$http"],module.factory("GisDataService",gisDataService)}(),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var baseLayersService=function(){var _baseLayersService={};return _baseLayersService.kaart=L.tileLayer("http://tiles.arcgis.com/tiles/1KSVSmnHT2Lw9ea6/arcgis/rest/services/basemap_stadsplan_v6/MapServer/tile/{z}/{y}/{x}",{id:"kaart"}),_baseLayersService.luchtfoto=L.tileLayer("http://tile.informatievlaanderen.be/ws/raadpleegdiensten/tms/1.0.0/omwrgbmrvl@GoogleMapsVL/{z}/{x}/{y}.png",{id:"luchtfoto",tms:"true"}),_baseLayersService};module.factory("BaseLayersService",baseLayersService)}(),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var helperService=function(){console.log("Helperservice CTOR");var _helperService={};return _helperService.clone=function(obj){var copy;if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date)return copy=new Date,copy.setTime(obj.getTime()),copy;if(obj instanceof Array){copy=[];for(var i=0,len=obj.length;len>i;i++)copy[i]=_helperService.clone(obj[i]);return copy}if(obj instanceof Object){copy={};for(var attr in obj)obj.hasOwnProperty(attr)&&(copy[attr]=_helperService.clone(obj[attr]));return copy}throw new Error("Unable to copy obj! Its type isn't supported.")},_helperService.findNested=function(obj,key){return _.has(obj,key)?[obj]:_.flatten(_.map(obj,function(v){return"object"==typeof v?_helperService.findNested(v,key):[]}),!0)},_helperService};module.factory("HelperService",helperService)}(),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var mapService=function(map){var _mapService={};return _mapService.currentLayers=[6],_mapService.IdentifiedItems=[],_mapService.visibleFeatures=[],_mapService.jsonFeatures=[],_mapService};mapService.$inject=["map"],module.factory("MapService",mapService)}(),angular.module("tink.gis.angular").run(["$templateCache",function($templateCache){$templateCache.put("templates/layer.html",'<input style="opacity: 1;position: relative;z-index:100" type=checkbox ng-model=layerData.visible ng-change=changeVisibility(layerData.url)>\n{{layerData.name}}'),$templateCache.put("templates/layersTemplate.html",'<div data-tink-nav-aside="" data-auto-select=true data-toggle-id=asideNavRight class="nav-aside nav-right"> <aside> <div class=nav-aside-section> Layers <tink-accordion data-start-open=true> <div ng-repeat="theme in layers"> <tink-accordion-panel> <data-header>  </data-header> <data-content>  <tink-accordion data-start-open=true> <div ng-repeat="group in theme.groups"> <tink-accordion-panel> <data-header>  </data-header> <data-content> <div ng-repeat="layerhup in layers"> <layer layer-data=layerhup></layer> </div> </data-content> </tink-accordion-panel> </div> </tink-accordion> </data-content> </tink-accordion-panel> </div> </tink-accordion> </div> </aside> </div>'),$templateCache.put("templates/mapTemplate.html",'<div class=tink-map> <div id=map class=leafletmap> <div class="btn-group ll searchbtns"> <button type=button class=btn prevent-default><i class="fa fa-map-marker"></i></button>\n<button type=button class=btn prevent-default><i class="fa fa-download"></i></button> </div> <div class="btn-group btn-group-vertical ll interactiebtns"> <button type=button class=btn ng-click=identify() ng-class="{active: activeInteractieKnop==\'identify\'}" prevent-default><i class="fa fa-info"></i></button>\n<button type=button class=btn ng-click=select() ng-class="{active: activeInteractieKnop==\'select\'}" prevent-default><i class="fa fa-mouse-pointer"></i></button>\n<button type=button class=btn ng-class="{active: activeInteractieKnop==\'dunno\'}" prevent-default><i class="fa fa-download"></i></button> </div> <div class="ll zoekbalken"> <input class=zoekbalk placeholder="Welke locatie of adres zoek je?" prevent-default> <select ng-options="layer as layer.name for layer in Layers track by layer.id" ng-model=selectedlayer ng-change=layerChange() ng-class="{invisible: activeInteractieKnop!=\'select\'}" prevent-default></select> </div> <div class="ll btn-group kaarttypes"> <button class=btn ng-class="{active: kaartIsGetoond==true}" ng-click=toonKaart() prevent-default>Kaart</button>\n<button class=btn ng-class="{active: kaartIsGetoond==false}" ng-click=toonLuchtfoto() prevent-default>Luchtfoto</button> </div> <div class="btn-group btn-group-vertical ll viewbtns"> <button type=button class=btn ng-click=zoomIn() prevent-default><i class="fa fa-plus"></i></button>\n<button type=button class=btn ng-click=zoomOut() prevent-default><i class="fa fa-minus"></i></button>\n<button type=button class=btn ng-click="" prevent-default><i class="fa fa-crosshairs"></i></button>\n<button type=button class=btn ng-click=fullExtent() prevent-default><i class="fa fa-home"></i></button> </div> <div class="btn-group btn-group-vertical ll localiseerbtn"> <button type=button class=btn prevent-default><i class="fa fa-male"></i></button> </div> </div> <tink-layers></tink-layers> <tink-search> </tink-search></div>'),$templateCache.put("templates/searchTemplate.html",'<div data-tink-nav-aside="" data-auto-select=true data-toggle-id=asideNavLeft class="nav-aside nav-left"> <aside> <div class=nav-aside-section> Zoek <div ng-repeat="feature in features "> layerid: {{feature.layerId}} <pre>{{feature.properties | json }}</pre> </div> </div> </aside> </div>')}]);
//# sourceMappingURL=tink-gis-angular.min.map