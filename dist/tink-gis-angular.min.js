/*! tink-gis-angular v1.0.0 */
"use strict";!function(module){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var theController=module.controller("layerController",function($scope,$http,GisDataService){console.log("layerController CTOR")});theController.$inject=["GisDataService"]}(),function(module){module=angular.module("tink.gis.angular");var theController=module.controller("layersController",function($scope,GisDataService){console.log("layersController CTOR")});theController.$inject=["GisDataService"]}(),function(module){module=angular.module("tink.gis.angular");var theController=module.controller("mapController",function($scope,HelperService,GisDataService,BaseLayersService,map,MapService){console.log("mapController ctor"),map=L.map("map",{center:[51.2192159,4.4028818],zoom:16,layers:[BaseLayersService.kaart]}),L.control.scale({imperial:!1}).addTo(map);var AGeaoService=L.esri.dynamicMapLayer({url:"http://app10.a.gis.local/arcgissql/rest/services/A_GeoService/operationallayers/MapServer",opacity:.5,layers:[1],useCors:!1}).addTo(map);map.on("click",function(e){console.log("click op de map");for(var x=0;x<MapService.visibleFeatures.length;x++)map.removeLayer(MapService.visibleFeatures[x]);AGeaoService.identify().on(map).at(e.latlng).layers("visible:1").run(function(error,featureCollection){for(var x=0;x<featureCollection.features.length;x++)console.log(featureCollection.features[x]),MapService.visibleFeatures.push(L.geoJson(featureCollection.features[x]).addTo(map))})}),$scope.zoomIn=function(){map.zoomIn()},$scope.zoomOut=function(){map.zoomOut()},$scope.fullExtent=function(){map.setView(new L.LatLng(51.2192159,4.4028818),16)},$scope.kaartIsGetoond=!0,$scope.toonKaart=function(){$scope.kaartIsGetoond=!0,map.removeLayer(BaseLayersService.luchtfoto),map.addLayer(BaseLayersService.kaart)},$scope.toonLuchtfoto=function(){$scope.kaartIsGetoond=!1,map.removeLayer(BaseLayersService.kaart),map.addLayer(BaseLayersService.luchtfoto)}});theController.$inject=["HelperService","GisDataService","BaseLayersService","map","MapService"]}(),function(module){module=angular.module("tink.gis.angular"),module.directive("layer",function(){return{restrict:"E",scope:{layerData:"="},templateUrl:"templates/layer.html",controller:"layerController"}})}(),function(module){module=angular.module("tink.gis.angular"),module.directive("tinklayers",function(){return{restrict:"E",templateUrl:"templates/layerstemplate.html",controller:"layersController"}})}(),function(module){module=angular.module("tink.gis.angular"),module.directive("tinkmap",function(){return{restrict:"E",templateUrl:"templates/maptemplate.html",scope:{parlayers:"=",parcenter:"="},controller:"mapController"}})}();try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}module.constant("appConfig",{templateUrl:"/digipolis.stadinkaart.webui",apiUrl:"/digipolis.stadinkaart.api/",enableDebug:!0,enableLog:!0}),module.directive("preventDefault",function(){return function(scope,element,attrs){angular.element(element).bind("click",function(event){event.preventDefault(),event.stopPropagation()}),angular.element(element).bind("dblclick",function(event){event.preventDefault(),event.stopPropagation()})}});var helperService=function(){var map={};return map};module.factory("map",helperService),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var baseLayersService=function(){var _baseLayersService={};return _baseLayersService.kaart=L.tileLayer("http://tiles.arcgis.com/tiles/1KSVSmnHT2Lw9ea6/arcgis/rest/services/basemap_stadsplan_v6/MapServer/tile/{z}/{y}/{x}",{id:"kaart"}),_baseLayersService.luchtfoto=L.tileLayer("http://tile.informatievlaanderen.be/ws/raadpleegdiensten/tms/1.0.0/omwrgbmrvl@GoogleMapsVL/{z}/{x}/{y}.png",{id:"luchtfoto",tms:"true"}),_baseLayersService};module.factory("BaseLayersService",baseLayersService)}(),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var gisDataService=function(HelperService){function initData(){return{layers:{baselayers:{kaart:{name:"kaart",url:"http://tiles.arcgis.com/tiles/1KSVSmnHT2Lw9ea6/arcgis/rest/services/basemap_stadsplan_v6/MapServer/tile/{z}/{y}/{x}",type:"xyz",layerOptions:{showOnSelector:!0}},luchtfoto:{name:"luchtfoto",url:"http://tile.informatievlaanderen.be/ws/raadpleegdiensten/tms/1.0.0/omwrgbmrvl@GoogleMapsVL/{z}/{x}/{y}.png",type:"xyz",layerOptions:{showOnSelector:!0,tms:!0}}},overlays:{perceel:{name:"geoservice",type:"agsFeature",url:"http://app10.a.gis.local/arcgissql/rest/services/A_GeoService/operationallayers/MapServer/6",visible:!0,layerOptions:{showOnSelector:!0,simplifyFactor:.5,precision:5,minZoom:17,maxZoom:25},group:"Test"}}}}}function _changeVisibility(url){var overlays=_mapData.layers.overlays,res=HelperService.findNested(overlays,"url");res.forEach(function(layer){layer.url==url&&(layer.visible=!layer.visible,console.log("Changed url: "+url+" to: "+layer.visible))},this)}var _mapData=function(){return HelperService.clone(initData())},_convertedMapDatatata={};return _convertedMapDatatata.layers={},_convertedMapDatatata.layers.overlays=HelperService.findNested(),{changeVisibility:_changeVisibility,mapData:_mapData(),convertedMapDatatata:_convertedMapDatatata}};gisDataService.$inject=["HelperService"],module.factory("GisDataService",gisDataService)}(),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var helperService=function(){console.log("Helperservice CTOR");var _helperService={};return _helperService.clone=function(obj){var copy;if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date)return copy=new Date,copy.setTime(obj.getTime()),copy;if(obj instanceof Array){copy=[];for(var i=0,len=obj.length;len>i;i++)copy[i]=_helperService.clone(obj[i]);return copy}if(obj instanceof Object){copy={};for(var attr in obj)obj.hasOwnProperty(attr)&&(copy[attr]=_helperService.clone(obj[attr]));return copy}throw new Error("Unable to copy obj! Its type isn't supported.")},_helperService.findNested=function(obj,key){return _.has(obj,key)?[obj]:_.flatten(_.map(obj,function(v){return"object"==typeof v?_helperService.findNested(v,key):[]}),!0)},_helperService};module.factory("HelperService",helperService)}(),function(){try{var module=angular.module("tink.gis.angular")}catch(e){var module=angular.module("tink.gis.angular",["tink.accordion","tink.tinkApi"])}var mapService=function(map){var _mapService={};return _mapService.currentLayers=[6],_mapService.visibleFeatures=[],_mapService};mapService.$inject=["map"],module.factory("MapService",mapService)}(),angular.module("tink.gis.angular").run(["$templateCache",function($templateCache){$templateCache.put("templates/layer.html",'<input style="opacity: 1;position: relative;z-index:100" type=checkbox ng-model=layerData.visible ng-change=changeVisibility(layerData.url)>\n{{layerData.name}}'),$templateCache.put("templates/layerstemplate.html",'<div data-tink-nav-aside="" data-auto-select=true data-toggle-id=asideNavRight class="nav-aside nav-right" style="height: 100%; position: absolute"> <aside> <div class=nav-aside-section> <tink-accordion data-start-open=true> <div ng-repeat="theme in layers"> <tink-accordion-panel> <data-header>  </data-header> <data-content>  <tink-accordion data-start-open=true> <div ng-repeat="group in theme.groups"> <tink-accordion-panel> <data-header>  </data-header> <data-content> <div ng-repeat="layerhup in layers"> <layer layer-data=layerhup></layer> </div> </data-content> </tink-accordion-panel> </div> </tink-accordion> </data-content> </tink-accordion-panel> </div> </tink-accordion> </div> </aside> </div>'),$templateCache.put("templates/maptemplate.html",'<div id=content> <div class=wrapper> <leaflet id=map class=leafletmap> <div class="btn-group ll searchbtns"> <button type=button class=btn prevent-default><i class="fa fa-map-marker"></i></button>\n<button type=button class=btn prevent-default><i class="fa fa-download"></i></button> </div> <div class="btn-group btn-group-vertical ll interactiebtns"> <button type=button class="btn active" prevent-default><i class="fa fa-info"></i></button>\n<button type=button class=btn prevent-default><i class="fa fa-mouse-pointer"></i></button>\n<button type=button class=btn prevent-default><i class="fa fa-download"></i></button> </div> <div class="ll zoekbalken"> <input id=zoekbalk1 placeholder="Welke locatie of adres zoek je?">\n<input class=invisible placeholder="Welke locatie of adres zoek je?"> </div> <div class="ll btn-group ll kaarttypes"> <button class=btn ng-class="{active: kaartIsGetoond==true}" ng-click=toonKaart() prevent-default>Kaart</button>\n<button class=btn ng-class="{active: kaartIsGetoond==false}" ng-click=toonLuchtfoto() prevent-default>Luchtfoto</button> </div> <div class="btn-group btn-group-vertical ll viewbtns"> <button type=button class=btn ng-click=zoomIn() prevent-default><i class="fa fa-plus"></i></button>\n<button type=button class=btn ng-click=zoomOut() prevent-default><i class="fa fa-minus"></i></button>\n<button type=button class=btn ng-click="" prevent-default><i class="fa fa-crosshairs"></i></button>\n<button type=button class=btn ng-click=fullExtent() prevent-default><i class="fa fa-home"></i></button> </div> <div class="ll localiseerbtn"> <button type=button class=btn prevent-default><i class="fa fa-male"></i></button> </div> </leaflet> </div> </div>')}]);
//# sourceMappingURL=tink-gis-angular.min.map