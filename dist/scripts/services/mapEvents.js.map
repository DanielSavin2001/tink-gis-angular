{"version":3,"sources":["../../../src/scripts/services/mapEvents.js"],"names":[],"mappings":"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","file":"mapEvents.js","sourcesContent":["'use strict';\r\n(function () {\r\n    var module = angular.module('tink.gis');\r\n    var mapEvents = function (map, MapService, MapData, DrawService) {\r\n        var _mapEvents = {};\r\n        map.on('draw:drawstart', function (event) {\r\n            console.log('draw started');\r\n            MapData.IsDrawing = true;\r\n            // MapData.CleanDrawings();\r\n        });\r\n\r\n        map.on('draw:drawstop', function (event) {\r\n            console.log('draw stopped');\r\n            MapData.IsDrawing = false;\r\n            // MapData.CleanDrawings();\r\n        });\r\n\r\n        var berkenOmtrek = function (layer) {\r\n            // Calculating the distance of the polyline\r\n            var tempLatLng = null;\r\n            var totalDistance = 0.00000;\r\n            _.each(layer._latlngs, function (latlng) {\r\n                if (tempLatLng == null) {\r\n                    tempLatLng = latlng;\r\n                    return;\r\n                }\r\n                totalDistance += tempLatLng.distanceTo(latlng);\r\n                tempLatLng = latlng;\r\n            });\r\n            return totalDistance.toFixed(2);\r\n        };\r\n\r\n        map.on('zoomend', function (event) {\r\n            console.log('Zoomend!!!');\r\n            console.log(event);\r\n            // MapData.Themes.forEach(x => {\r\n            //     console.log(x.MapData);\r\n            // });\r\n        });\r\n\r\n        map.on('click', function (event) {\r\n            console.log('click op map! Is drawing: ' + MapData.IsDrawing);\r\n            if (!MapData.IsDrawing) {\r\n                MapData.CleanAll();\r\n                switch (MapData.ActiveInteractieKnop) {\r\n                    case ActiveInteractieButton.IDENTIFY:\r\n                        MapData.LastIdentifyBounds = map.getBounds();\r\n                        MapService.Identify(event, 10);\r\n                        break;\r\n                    case ActiveInteractieButton.SELECT:\r\n                        if (MapData.DrawingType === DrawingOption.NIETS) {\r\n                            MapService.Select(event);\r\n                        } // else a drawing finished\r\n                        break;\r\n                    case ActiveInteractieButton.WATISHIER:\r\n                        MapService.WatIsHier(event);\r\n                        break;\r\n                    case ActiveInteractieButton.METEN:\r\n\r\n                        break;\r\n                    default:\r\n                        console.log('MAG NIET!!!!!!!!');\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                // MapData.DrawingObject = event;\r\n                console.log(\"DrawingObject: \");\r\n                console.log(MapData.DrawingObject);\r\n                switch (MapData.DrawingType) {\r\n                    case DrawingOption.AFSTAND:\r\n                        break;\r\n                    case DrawingOption.OPPERVLAKTE:\r\n                        break;\r\n                    default:\r\n                        console.log(\"Aant drawen zonder een gekent type!!!!!!\");\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        map.on('draw:created', function (e) {\r\n            console.log('draw created');\r\n            console.log(e)\r\n            switch (MapData.ActiveInteractieKnop) {\r\n                case ActiveInteractieButton.SELECT:\r\n                    switch (MapData.DrawingType) {\r\n                        case DrawingOption.LIJN:\r\n                            break;\r\n                        case DrawingOption.VIERKANT:\r\n                            break;\r\n                        case DrawingOption.POLYGON:\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    MapService.Query(e);\r\n\r\n                    // if (MapData.SelectedLayer.id == '') {\r\n                    //     console.log('Geen layer selected! kan dus niet opvragen');\r\n                    // }\r\n                    // else {\r\n                    //     MapService.Query(event);\r\n                    // }\r\n                    break;\r\n                case ActiveInteractieButton.METEN:\r\n                    switch (MapData.DrawingType) {\r\n                        case DrawingOption.AFSTAND:\r\n                            var omtrek = berkenOmtrek(e.layer);\r\n                            var popup = e.layer.bindPopup('Afstand (m): ' + omtrek + ' ');\r\n                            popup.on('popupclose', function (event) {\r\n                                MapData.CleanAll();\r\n                            });\r\n                            e.layer.openPopup();\r\n                            break;\r\n                        case DrawingOption.OPPERVLAKTE:\r\n                            var omtrek = berkenOmtrek(e.layer);\r\n                            var popuptekst = '<p>Opp  (km<sup>2</sup>): ' + (LGeo.area(e.layer) / 1000000).toFixed(2) + '</p>'\r\n                                + '<p>Omtrek (m): ' + omtrek + ' </p>';\r\n                            var popup = e.layer.bindPopup(popuptekst);\r\n                            popup.on('popupclose', function (event) {\r\n                                MapData.CleanAll();\r\n                            });\r\n                            e.layer.openPopup();\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    break;\r\n                default:\r\n                    console.log('MAG NIET!!!!!!!!');\r\n                    break;\r\n            }\r\n            MapData.IsDrawing = false;\r\n        });\r\n\r\n\r\n        return _mapEvents;\r\n    };\r\n    module.factory('MapEvents', mapEvents);\r\n})();\r\n\r\n\r\n"]}