{"version":3,"sources":["../../../src/scripts/services/GISService.js"],"names":[],"mappings":";;AAEA;;AACA,CAAC,YAAW;AACR,QAAI,SAAS,QAAQ,MAAR,CAAe,UAAf,CAAT,CADI;AAER,QAAI,UAAU,SAAV,OAAU,CAAS,KAAT,EAAgB,GAAhB,EAAqB,OAArB,EAA8B,aAA9B,EAA6C,UAA7C,EAAyD;AACnE,YAAI,WAAW,EAAX,CAD+D;AAEnE,iBAAS,cAAT,GAA0B,UAAS,KAAT,EAAgB;AACtC,gBAAI,iBAAiB,cAAc,uBAAd,CAAsC,MAAM,MAAN,CAAvD,CADkC;AAEtC,gBAAI,MAAM,eAAe,CAAf,GAAmB,GAAnB,GAAyB,eAAe,CAAf,CAFG;AAGtC,gBAAI,SAAS,mBAAmB,GAAnB,CAAT,CAHkC;AAItC,oBAAQ,cAAR,GAJsC;AAKtC,kBAAM,GAAN,CAAU,+GAA+G,MAA/G,GAAwH,4BAAxH,CAAV,CACI,OADJ,CACY,UAAS,IAAT,EAAe,MAAf,EAAuB,OAAvB,EAAgC,MAAhC,EAAwC;AAC5C,oBAAI,CAAC,KAAK,KAAL,EAAY;AACb,4BAAQ,qBAAR,CAA8B,IAA9B,EADa;AAEb,4BAAQ,GAAR,CAAY,IAAZ,EAFa;AAGb,4BAAQ,qBAAR,CAA8B,MAAM,MAAN,EAAc,IAA5C,EAHa;iBAAjB,MAKK;AACD,4BAAQ,qBAAR,CAA8B,MAAM,MAAN,EAAc,KAA5C,EADC;iBALL;aADI,CADZ,CAWI,KAXJ,CAWU,UAAS,IAAT,EAAe,MAAf,EAAuB,OAAvB,EAAgC,MAAhC,EAAwC;AAC1C,wBAAQ,GAAR,CAAY,QAAZ,EAD0C;AAE1C,wBAAQ,GAAR,CAAY,MAAZ,EAF0C;AAG1C,wBAAQ,GAAR,CAAY,OAAZ,EAH0C;AAI1C,wBAAQ,GAAR,CAAY,IAAZ,EAJ0C;aAAxC,CAXV,CALsC;SAAhB,CAFyC;AAyBnE,iBAAS,YAAT,GAAwB,UAAS,GAAT,EAAc;AAClC,gBAAI,OAAO,MAAM,GAAN,CAAU,GAAV,CAAP,CAD8B;AAElC,mBAAO,IAAP,CAFkC;SAAd,CAzB2C;AA6BnE,iBAAS,iBAAT,GAA6B,UAAS,aAAT,EAAwB;AACjD,gBAAI,OAAO,MAAM,GAAN,CAAU,gBAAgB,gBAAhB,CAAjB,CAD6C;AAEjD,mBAAO,IAAP,CAFiD;SAAxB,CA7BsC;AAiCnE,eAAO,QAAP,CAjCmE;KAAzD,CAFN;AAqCR,WAAO,OAAP,GAAiB,CAAC,OAAD,EAAU,KAAV,EAAiB,SAAjB,EAA4B,eAA5B,EAA6C,YAA7C,CAAjB,CArCQ;AAsCR,WAAO,OAAP,CAAe,YAAf,EAA6B,OAA7B,EAtCQ;CAAX,CAAD","file":"GISService.js","sourcesContent":["//http://app10.p.gis.local/arcgissql/rest/services/COMLOC_CRAB_NAVTEQ/GeocodeServer/reverseGeocode\r\n//http://proj4js.org/\r\n'use strict';\r\n(function() {\r\n    var module = angular.module('tink.gis');\r\n    var service = function($http, map, MapData, HelperService, $rootScope) {\r\n        var _service = {};\r\n        _service.ReverseGeocode = function(event) {\r\n            var lambert72Cords = HelperService.ConvertWSG84ToLambert72(event.latlng);\r\n            var loc = lambert72Cords.x + \",\" + lambert72Cords.y;\r\n            var urlloc = encodeURIComponent(loc);\r\n            MapData.CleanWatIsHier();\r\n            $http.get('http://app10.p.gis.local/arcgissql/rest/services/COMLOC_CRAB_NAVTEQ/GeocodeServer/reverseGeocode?location=' + urlloc + '&distance=50&outSR=&f=json').\r\n                success(function(data, status, headers, config) {\r\n                    if (!data.error) {\r\n                        MapData.CreateWatIsHierMarker(data);\r\n                        console.log(data);\r\n                        MapData.CreateOrigineleMarker(event.latlng, true);\r\n                    }\r\n                    else {\r\n                        MapData.CreateOrigineleMarker(event.latlng, false);\r\n                    }\r\n                }).\r\n                error(function(data, status, headers, config) {\r\n                    console.log(\"ERROR!\");\r\n                    console.log(status);\r\n                    console.log(headers);\r\n                    console.log(data);\r\n                });\r\n        };\r\n        _service.GetThemeData = function(url) {\r\n            var prom = $http.get(url);\r\n            return prom;\r\n        };\r\n        _service.GetThemeLayerData = function(mapServiceUrl) {\r\n            var prom = $http.get(mapServiceUrl + 'layers?f=pjson');\r\n            return prom;\r\n        };\r\n        return _service;\r\n    };\r\n    module.$inject = [\"$http\", 'map', 'MapData', 'HelperService', '$rootScope'];\r\n    module.factory(\"GISService\", service);\r\n})();"]}